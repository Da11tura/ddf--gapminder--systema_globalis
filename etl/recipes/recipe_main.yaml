# recipe for dataset
info:
    id: sg-dataset

config:
    # the path to search recipe files to include
    recipes_dir: ./
    # the path to search dictionary files
    dictionary_dir: ../translation_dictionaries
    # the path to search ddf datasets
    ddf_dir: /Users/semio/src/work/Gapminder

include:
    - recipe_gw_common.yaml
    - recipe_gw_lex_only.yaml
    - recipe_gw_gdp.yaml
    - recipe_gw_co2.yaml
    - recipe_gw_pop.yaml
    - recipe_wdi.yaml
    - recipe_gw_gini.yaml
    - recipe_ihme_edu_attainment.yml
    - recipe_unpop.yaml

ingredients:
    - id: gw-concepts-all
      dataset: ddf--gapminder--gapminder_world
      key: concept
      value: "*"
    - id: gw-datapoints-all
      dataset: ddf--gapminder--gapminder_world
      key: "geo,time"
      value: "*"
    - id: static-assets-datapoints
      dataset: ddf--gapminder--static_assets
      key: geo, time
      value: "*"
    - id: static-assets-concepts
      dataset: ddf--gapminder--static_assets
      key: concept
      value: "*"

cooking:
    datapoints:
        - procedure: merge
          result: all-datapoints-merged
          ingredients:
              - gw-datapoints-all
              - lex-datapoints-final
              - gdp-datapoints-final
              - pop-datapoints-final
              - co2-datapoints-final
              - wdi-datapoints-final
              - gini-datapoints
              - edu-datapoints-final
              - unpop-datapoints-final
              - static-assets-datapoints
    entities:
        - procedure: identity
          ingredients:
              - gw-entities-geo
          options:
              copy: true
          result: entities-final
    concepts:
        - procedure: merge
          result: all-concepts-merged
          ingredients:
              - gw-concepts-all-wdi-translated
              - static-assets-concepts
              - gw-concepts-geo
              - gw-concepts-discrete
              - lex-concepts-final
              - gdp-concepts-final
              - pop-concepts-final
              - co2-concepts-final
              - gini-concepts
              - edu-concepts-final
              - unpop-concepts-final
          options:
              deep: true
