info:
    id: dataset_name
    base:
        - &d1 lokkilok/ddf--gapminder--democracy

ingredients:
    - id: democracy-datapoints
      dataset: *d1
      key: country, time
      value: "*"

    - id: democracy-concepts-measures
      dataset: *d1
      key: concept
      value: "*"
      filter:
          concept_type:
              - measure

    - id: democracy-concepts-discrete
      dataset: *d1
      key: concept
      value: "*"
      filter:
          concept:
              - updated
              - version

cooking:
    datapoints:
        - procedure: translate_header
          ingredients:
            - democracy-datapoints
          result: democracy-datapoints-final
          options:
              dictionary:
                  country: geo

    concepts:
        - procedure: merge
          ingredients:
              - democracy-concepts-discrete
              - democracy-concepts-measures
          options:
              deep: true
          result: democracy-concepts-final
